(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8984],{5540:(e,r,a)=>{Promise.resolve().then(a.bind(a,2770))},2770:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>h});var l=a(5155),t=a(4085),s=a(2336),n=a(5488),o=a(2079),c=a(654),i=a(5524),d=a(5565),x=a(2115);function h(){var e,r,a,h;let[u,m]=(0,x.useState)(!0),[p,f]=(0,x.useState)({name:"",nameEn:"",imageUrl:"",cars:"",qtyPerson:0,qtyBags:0,price:0}),[j,b]=(0,x.useState)(!1),[v,g]=(0,x.useState)([]),y=(0,x.useRef)(null),[N,w]=(0,x.useState)(null);(0,x.useEffect)(()=>{fetch("".concat("http://localhost:3000/api","/transfer-cars")).then(e=>e.json()).then(e=>{g(e)}).catch(()=>console.error("Failed to fetch countries")).finally(()=>m(!1))},[]);let k=async()=>{if(!N)return null;let e=new FormData;e.append("file",N);try{let r=await fetch("".concat("http://localhost:3000/api","/upload"),{method:"POST",body:e});if(!r.ok)throw Error("Image upload failed");return(await r.json()).imageUrl}catch(e){return console.error(e),null}},E=async()=>{if(!N||!p)return;let e=await k();if(e)try{let r=await fetch("".concat("http://localhost:3000/api","/transfer-cars"),{method:"POST",body:JSON.stringify({...p,imageUrl:e}),headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("Failed to add new-route");let a=await r.json();g([...v,a]),w(null),f({name:"",nameEn:"",imageUrl:"",cars:"",qtyPerson:0,qtyBags:0,price:0}),b(!1)}catch(e){console.error(e)}},A=async e=>{try{let r=await fetch("".concat("http://localhost:3000/api","/transfer-cars/").concat(e),{method:"DELETE"});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to delete route")}g(v.filter(r=>r.id!==e))}catch(e){console.error("Error deleting country:",e)}};return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("div",{className:"mb-3 text-[#373F47] font-bold",children:"Добавить авто"}),j&&(0,l.jsx)("div",{className:"absolute top-0 right-0 bottom-0 left-0 bg-[#00000085] z-20 flex justify-center items-center",children:(0,l.jsxs)("div",{className:"z-30 bg-white p-4 max-w-[450px] max-h-[500px] rounded-[10px] flex flex-col gap-4 pb-16 overflow-y-auto custom-scroll",children:[(0,l.jsx)("button",{onClick:()=>{f({name:"",nameEn:"",imageUrl:"",cars:"",qtyPerson:0,qtyBags:0,price:0}),w(null),b(!1)},className:"cursor-pointer text-[#f02f2f] self-end",children:(0,l.jsx)(c.A,{})}),(0,l.jsx)("div",{className:"mb-3 text-[#373F47] font-bold self-center",children:"Добавить новое авто"}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 mb-4",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("label",{htmlFor:"name",className:"",children:"Название"}),(0,l.jsx)(s.p,{required:!0,id:"name",type:"text",value:(null==p?void 0:p.name)||"",onChange:e=>f(r=>({...r,name:e.target.value})),placeholder:"Например Эконом, Бизнес"}),(0,l.jsx)(s.p,{required:!0,id:"name",type:"text",value:(null==p?void 0:p.nameEn)||"",onChange:e=>f(r=>({...r,nameEn:e.target.value})),placeholder:"Например Economy, Business"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("label",{htmlFor:"",className:"",children:"Картинка"}),(0,l.jsx)(s.p,{required:!0,type:"file",onChange:e=>{var r;return w((null===(r=e.target.files)||void 0===r?void 0:r[0])||null)},ref:y})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("label",{htmlFor:"",className:"",children:"Цена"}),(0,l.jsx)(s.p,{required:!0,type:"number",placeholder:"Цена",value:null!==(e=null==p?void 0:p.price)&&void 0!==e?e:"",onChange:e=>f(r=>({...r,price:Number(e.target.value)||0}))})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("label",{htmlFor:"",className:"",children:"Модели"}),(0,l.jsx)(s.p,{required:!0,type:"text",placeholder:"Модели авто через запятую",value:null!==(r=null==p?void 0:p.cars)&&void 0!==r?r:"",onChange:e=>f(r=>({...r,cars:e.target.value||""}))})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("label",{htmlFor:"",className:"",children:"Число пассажиров"}),(0,l.jsx)(s.p,{required:!0,type:"number",placeholder:"Количество пассажиров",value:null!==(a=null==p?void 0:p.qtyPerson)&&void 0!==a?a:"",onChange:e=>f(r=>({...r,qtyPerson:Number(e.target.value)||0}))})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("label",{htmlFor:"",className:"",children:"Количество багажа"}),(0,l.jsx)(s.p,{required:!0,type:"number",placeholder:"Количество багажа",value:null!==(h=null==p?void 0:p.qtyBags)&&void 0!==h?h:"",onChange:e=>f(r=>({...r,qtyBags:Number(e.target.value)||0}))})]}),(0,l.jsx)(t.$,{className:"self-center mt-5",onClick:()=>{E()},children:"Добавить"})]})]})}),(0,l.jsx)(t.$,{className:"mb-10",onClick:()=>{b(!0)},children:"Добавить новое авто"}),(0,l.jsxs)(o.XI,{children:[(0,l.jsx)(o.A0,{children:(0,l.jsxs)(o.Hj,{children:[(0,l.jsx)(o.nd,{children:"Название"}),(0,l.jsx)(o.nd,{children:"Картинка"}),(0,l.jsx)(o.nd,{children:"Модели"}),(0,l.jsx)(o.nd,{children:"Число пассажиров"}),(0,l.jsx)(o.nd,{children:"Количество багажа"}),(0,l.jsx)(o.nd,{})]})}),(0,l.jsx)(o.BF,{children:u?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o.Hj,{children:[(0,l.jsx)(o.nA,{children:(0,l.jsx)(n.E,{className:"h-[20px] w-[200px]"})}),(0,l.jsx)(o.nA,{children:(0,l.jsx)(n.E,{className:"h-[50px] w-[50px]"})}),(0,l.jsx)(o.nA,{children:(0,l.jsx)(n.E,{className:"h-[20px] w-[150px]"})})]}),(0,l.jsxs)(o.Hj,{children:[(0,l.jsx)(o.nA,{children:(0,l.jsx)(n.E,{className:"h-[20px] w-[200px]"})}),(0,l.jsx)(o.nA,{children:(0,l.jsx)(n.E,{className:"h-[50px] w-[50px]"})}),(0,l.jsx)(o.nA,{children:(0,l.jsx)(n.E,{className:"h-[20px] w-[150px]"})})]}),(0,l.jsxs)(o.Hj,{children:[(0,l.jsx)(o.nA,{children:(0,l.jsx)(n.E,{className:"h-[20px] w-[200px]"})}),(0,l.jsx)(o.nA,{children:(0,l.jsx)(n.E,{className:"h-[50px] w-[50px]"})}),(0,l.jsx)(o.nA,{children:(0,l.jsx)(n.E,{className:"h-[20px] w-[150px]"})})]})]}):v.map(e=>(0,l.jsxs)(o.Hj,{children:[(0,l.jsx)(o.nA,{children:e.name}),(0,l.jsx)(o.nA,{children:e.imageUrl&&(0,l.jsx)(d.default,{src:e.imageUrl,width:100,height:100,alt:e.name,className:"max-h-[100px] max-w-[100px] object-contain rounded-md"})}),(0,l.jsx)(o.nA,{children:e.price}),(0,l.jsx)(o.nA,{children:e.cars}),(0,l.jsx)(o.nA,{children:e.qtyPerson}),(0,l.jsx)(o.nA,{children:e.qtyBags}),(0,l.jsx)(o.nA,{children:(0,l.jsx)(i.A,{onClick:()=>{A(e.id)},className:"cursor-pointer text-[#6C7C8C] hover:text-rose-500"})})]},e.id))})]})]})}},4085:(e,r,a)=>{"use strict";a.d(r,{$:()=>i});var l=a(5155),t=a(2115),s=a(2317),n=a(1027),o=a(9602);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),i=t.forwardRef((e,r)=>{let{className:a,variant:t,size:n,asChild:i=!1,...d}=e,x=i?s.DX:"button";return(0,l.jsx)(x,{className:(0,o.cn)(c({variant:t,size:n,className:a})),ref:r,...d})});i.displayName="Button"},2336:(e,r,a)=>{"use strict";a.d(r,{p:()=>n});var l=a(5155),t=a(2115),s=a(9602);let n=t.forwardRef((e,r)=>{let{className:a,type:t,...n}=e;return(0,l.jsx)("input",{type:t,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:r,...n})});n.displayName="Input"},5488:(e,r,a)=>{"use strict";a.d(r,{E:()=>s});var l=a(5155),t=a(9602);function s(e){let{className:r,...a}=e;return(0,l.jsx)("div",{className:(0,t.cn)("animate-pulse rounded-md bg-primary/10",r),...a})}},2079:(e,r,a)=>{"use strict";a.d(r,{A0:()=>o,BF:()=>c,Hj:()=>i,XI:()=>n,nA:()=>x,nd:()=>d});var l=a(5155),t=a(2115),s=a(9602);let n=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:r,className:(0,s.cn)("w-full caption-bottom text-sm",a),...t})})});n.displayName="Table";let o=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,l.jsx)("thead",{ref:r,className:(0,s.cn)("[&_tr]:border-b",a),...t})});o.displayName="TableHeader";let c=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,l.jsx)("tbody",{ref:r,className:(0,s.cn)("[&_tr:last-child]:border-0",a),...t})});c.displayName="TableBody",t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,l.jsx)("tfoot",{ref:r,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...t})}).displayName="TableFooter";let i=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,l.jsx)("tr",{ref:r,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...t})});i.displayName="TableRow";let d=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,l.jsx)("th",{ref:r,className:(0,s.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...t})});d.displayName="TableHead";let x=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,l.jsx)("td",{ref:r,className:(0,s.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...t})});x.displayName="TableCell",t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,l.jsx)("caption",{ref:r,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",a),...t})}).displayName="TableCaption"},9602:(e,r,a)=>{"use strict";a.d(r,{cn:()=>s});var l=a(3463),t=a(9795);function s(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,t.QP)((0,l.$)(r))}},654:(e,r,a)=>{"use strict";a.d(r,{A:()=>l});let l=(0,a(4057).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},5524:(e,r,a)=>{"use strict";a.d(r,{A:()=>l});let l=(0,a(4057).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},e=>{var r=r=>e(e.s=r);e.O(0,[5565,4129,8441,1517,7358],()=>r(5540)),_N_E=e.O()}]);